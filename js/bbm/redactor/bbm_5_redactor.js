if(typeof RedactorPlugins=="undefined")var RedactorPlugins={};!function(n,t,i,r){RedactorPlugins.bbmButtons={init:function(){var t=this;typeof t._init!==r&&t.exec(t);n(i).on("bbmButtonsPlugin",function(){t.exec(t)})},exec:function(t){n.each(t.textButtons,function(n,i){var r=t.getBtn(n);r.addClass("BbmText").text(i)}),n.each(t.faButtons,function(n,i){var r=t.getBtn(n);r.addClass("BbmFa fa "+i)})},textButtons:{},faButtons:{}},XenForo.BbmCustomEditor=function(n){this.__construct(n)},XenForo.BbmCustomEditor.prototype={__construct:function(t){var i=t.data("options"),f,e,o,s,u;if(typeof i===r)return!1;f=i.bbmButtonConfig||!1,e=this,n.extend(this,{$textarea:t,redactorOptions:i,bbmConfig:f,bbmButtons:i.buttons}),f!==!1&&(o=[],n.each(f,function(n,t){t=e.filterGroup(t),t&&o.push(t)}),s={editorOptions:{buttons:o}},n.extend(!0,i,s),u=i.editorOptions,typeof u.plugins!==r&&n.isArray(u.plugins)?u.plugins.push("bbmButtons"):u.plugins=["bbmButtons"]),setTimeout(function(n){e.postHook(n)},0)},filterGroup:function(n){return n},postHook:function(){var u=this;if(this.redactor=this.$textarea.data("redactor"),typeof this.redactor===r)return!1;this.customButtons=this.redactor.opts.buttonsCustom,typeof u.bbmButtons!==r&&u.bbmButtons!=null&&(n.each(u.bbmButtons,function(n,t){var s,i,o,c;if(typeof u.customButtons[n]!==r&&(s=u.customButtons[n],typeof t.tag!==r&&typeof t.bbCodeContent!==r)){var h=t.tag,e=t.bbCodeContent,f=t.bbCodeOptions,l=t.bbCodeOptionsSeparator,a=t.textButton;(t.textButton?RedactorPlugins.bbmButtons.textButtons[n]=t.textButton:t.faButton&&(RedactorPlugins.bbmButtons.faButtons[n]=t.faButton),e||f)&&(i="["+h,o="[/"+h+"]",i+=f?"="+f+"]":"]",c=i+e+o,s.callback=function(n){if(f&&!e){var t=XenForo.BbCodeWysiwygEditor.prototype;if(typeof t.wrapSelectionInHtml!==r){t.wrapSelectionInHtml(n,i,o,!0);return}}n.execCommand("inserthtml",c)})}}),RedactorPlugins.bbmButtons._init=!0,n(i).triggerHandler("bbmButtonsPlugin")),typeof BBM_Redactor_EXTEND!==r&&n.each(BBM_Redactor_EXTEND,function(n,t){typeof t=="function"&&t(u)})}},XenForo.register("textarea.BbCodeWysiwygEditor","XenForo.BbmCustomEditor")}(jQuery,this,document,"undefined");