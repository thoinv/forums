XenForo.Analytics=function(){this.__construct()};
XenForo.Analytics.prototype={__construct:function(){$(document).ready(function(){XenForo._Analytics.heatmap_draw()})},min:999999999,max:0,range:0,heatmap_change:function(a){},heatmap_draw:function(){XenForo._Analytics.min=999999999;XenForo._Analytics.max=0;$(".cell[data-val]").each(function(a,b){var c=$(b).data("val");XenForo._Analytics.min>c&&(XenForo._Analytics.min=c);XenForo._Analytics.max<c&&(XenForo._Analytics.max=c)});XenForo._Analytics.range=XenForo._Analytics.max-XenForo._Analytics.min;$(".cell[data-val]").each(function(a,
b){var c=$(b).data("val");$(b).css("opacity",0==XenForo._Analytics.range?1:(c-XenForo._Analytics.min)/XenForo._Analytics.range)})},change_parameter:function(a){$(a).on("change",function(){XenForo._Analytics.get_new_data()})},get_new_data:function(){XenForo.ajax(document.location.origin+document.location.pathname+"?analytics/heatmap.json&_xfConfirm=1&metric="+encodeURIComponent($("#ctrl_metric").val())+"&segment="+encodeURIComponent($("#ctrl_segment").val())+"&weeks="+encodeURIComponent($("#weeks").val())+
"&end="+encodeURIComponent($("#end").val()),"",function(a,b){void 0===a.error?($.each(a.heatmap_data,function(a,b){$.each(b,function(b,d){$("#slot"+a+"-"+b).data("val",d)})}),XenForo._Analytics.heatmap_draw()):XenForo.hasResponseError(a,b)})}};XenForo._Analytics=new XenForo.Analytics;XenForo.register("#Heatmap + #parameters .textCtrl","XenForo._Analytics.change_parameter");
