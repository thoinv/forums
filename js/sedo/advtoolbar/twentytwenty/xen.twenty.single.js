/*Twentytwenty + XenForo Integration*/
typeof Sedo=="undefined"&&(Sedo={}),!function(n,t,i){Sedo.TwentyX2={init:function(i){i.each(function(){var i=n(this).addClass("twentytwenty-container"),o,u,s,h;diffPos=parseFloat(i.data("diffPos")),img1=i.find("img").eq(0),img2=i.find("img").eq(1),imgWidth1=parseInt(img1.data("width")),imgWidth2=parseInt(img2.data("width")),parentWidth=i.parents(".adv_bimg_block").addClass("compare").width(),parentWidth!=0&&(imgWidth1>parentWidth&&(imgWidth1=parentWidth,img1.attr("data-width",imgWidth1)),imgWidth2>parentWidth&&(imgWidth2=parentWidth,img2.attr("data-width",imgWidth2))),img1.width(imgWidth1),img2.width(imgWidth2),o=imgWidth1>imgWidth2?imgWidth1:imgWidth2,i.width(o).attr("data-width",o);var f=diffPos?diffPos:.5,r=i.hasClass("DiffV")?"vertical":"horizontal",v=r==="vertical"?"down":"left",a=r==="vertical"?"up":"right";i.wrap("<div class='twentytwenty-wrapper twentytwenty-"+r+"'></div>"),i.append("<div class='twentytwenty-overlay'></div>"),i.append("<div class='twentytwenty-handle'></div>"),u=i.find(".twentytwenty-handle"),u.append("<span class='twentytwenty-"+v+"-arrow'></span>"),u.append("<span class='twentytwenty-"+a+"-arrow'></span>");var e=i.find("img:first").addClass("twentytwenty-before"),w=i.find("img:last").addClass("twentytwenty-after"),l=i.find(".twentytwenty-overlay");l.append("<div class='twentytwenty-before-label'></div>"),l.append("<div class='twentytwenty-after-label'></div>");var y=function(n){var i=e.width(),t=e.height();return{w:i+"px",h:t+"px",cw:n*i+"px",ch:n*t+"px"}},p=function(n){r==="vertical"?e.css("clip","rect(0,"+n.w+","+n.ch+",0)"):e.css("clip","rect(0,"+n.cw+","+n.h+",0)"),i.css("height",n.h)},c=function(n){var t=y(n);u.css(r==="vertical"?"top":"left",r==="vertical"?t.ch:t.cw),p(t)};n(t,u).on("resize.twentytwenty",function(){c(f)});s=0,h=0;u.on("movestart",function(n){(n.distX>n.distY&&n.distX<-n.distY||n.distX<n.distY&&n.distX>-n.distY)&&r!=="vertical"?n.preventDefault():(n.distX<n.distY&&n.distX<-n.distY||n.distX>n.distY&&n.distX>-n.distY)&&r==="vertical"&&n.preventDefault(),i.addClass("active"),s=i.offset().left,offsetY=i.offset().top,h=e.width(),imgHeight=e.height()});u.on("moveend",function(){i.removeClass("active")});u.on("move",function(n){i.hasClass("active")&&(f=r==="vertical"?(n.pageY-offsetY)/imgHeight:(n.pageX-s)/h,f<0&&(f=0),f>1&&(f=1),c(f))});i.find("img").on("mousedown",function(n){n.preventDefault()});n(t).trigger("resize.twentytwenty")})},reload:function(){n(".AdvBimgDiff").each(function(){var t=n(this);t.height()==0&&t.find("img").load(function(){t.width(t.data("width")).trigger("resize.twentytwenty")})})}},XenForo.register(".AdvBimgDiff","Sedo.TwentyX2.init");n(i).on("XenForoActivate",Sedo.TwentyX2.reload)}(jQuery,this,document);